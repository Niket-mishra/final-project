<div class="container py-4">
  <h4 class="mb-4 fw-bold text-center">‚ùì Respond to Customer Queries</h4>

  @if (isLoading) {
    <div class="text-center py-5">
      <div class="spinner-border text-primary" role="status"></div>
      <p class="mt-3">Loading queries...</p>
    </div>
  } @else {
    <div class="row">
      <div class="col-md-5">
        <h6 class="mb-3">üìã Pending Queries</h6>
        <ul class="list-group">
          @for (query of queries; track query.queryId) {
            <li class="list-group-item" (click)="selectQuery(query)" [class.active]="query === selectedQuery">
              <strong>{{ query.customer?.firstName }}:</strong> {{ query.querySubject }}
              <br />
              <small class="text-muted">{{ query.queryDescription }}</small>
            </li>
          }
        </ul>
      </div>

      <div class="col-md-7">
        @if (selectedQuery) {
          <div class="card p-4 shadow-sm">
            <h6 class="fw-bold mb-2">Respond to: {{ selectedQuery.querySubject }}</h6>
            <form [formGroup]="responseForm" (ngSubmit)="submitResponse()">
              <textarea formControlName="officerResponse" rows="5" class="form-control mb-3"></textarea>
              <button type="submit" class="btn btn-success w-100" [disabled]="responseForm.invalid">
                Submit Response
              </button>
            </form>
          </div>
        } @else {
          <p class="text-muted">Select a query to respond.</p>
        }
      </div>
    </div>
  }
</div>