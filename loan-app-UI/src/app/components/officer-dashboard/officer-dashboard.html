<div class="officer-dashboard container py-4">
  <h3 class="text-center fw-bold mb-4">üë®‚Äçüíº Officer Dashboard</h3>

  @if (error) {
    <div class="alert alert-danger text-center">{{ error }}</div>
  }

  @if (isLoading) {
    <div class="text-center py-5">
      <div class="spinner-border text-primary" role="status"></div>
      <p class="mt-3">Loading dashboard data...</p>
    </div>
  } @else {
    <!-- Assigned Applications -->
    <section class="mb-5">
      <h5 class="mb-3">üìã Assigned Applications</h5>

      @if (assignedApplications.length === 0) {
        <p class="text-muted">No applications assigned.</p>
      } @else {
        <div class="row g-3">
          @for (app of assignedApplications; track app.applicationId) {
            <div class="col-md-6">
              <div class="card shadow-sm border-0 h-100">
                <div class="card-body">
                  <h6 class="fw-bold">Application #{{ app.applicationId }}</h6>
                  <p><strong>Customer:</strong> {{ app.customer.firstName }} {{ app.customer.lastName }}</p>
                  <p><strong>Loan Type:</strong> {{ app.loanScheme?.schemeName || '‚Äî' }}</p>
                  <p><strong>Amount:</strong> ‚Çπ{{ app.requestedAmount }}</p>
                  <p><strong>Purpose:</strong> {{ app.purposeOfLoan }}</p>
                  <p><strong>Status:</strong>
                    <span class="badge bg-{{ getApplicationBadge(app.status) }}">
                      {{ app.status }}
                    </span>
                  </p>
                  <p class="text-muted small">
                    Submitted: {{ app.applicationDate | date:'mediumDate' }}<br>
                    Assigned: {{ app.officerAssignedDate || '‚Äî' }}
                  </p>
                </div>
              </div>
            </div>
          }
        </div>
      }
    </section>

    <!-- Verified Documents -->
    <section class="mb-5">
      <h5 class="mb-3">üìÅ Verified Documents</h5>

      @if (verifiedDocuments.length === 0) {
        <p class="text-muted">No documents verified.</p>
      } @else {
        <ul class="list-group">
          @for (doc of verifiedDocuments; track doc.documentId) {
            <li class="list-group-item d-flex justify-content-between align-items-start flex-column flex-md-row">
              <div>
                <strong>{{ doc.documentType }}</strong> ‚Äî {{ doc.fileName }}<br>
                <small class="text-muted">Loan ID: {{ doc.applicationId }} | Verified: {{ doc.verificationDate || '‚Äî' }}</small>
              </div>
              <span class="badge bg-{{ getDocumentBadge(doc.verificationStatus) }}">
                {{ doc.verificationStatus }}
              </span>
            </li>
          }
        </ul>
      }
    </section>

    <!-- Handled Queries -->
    <section>
      <h5 class="mb-3">‚ùì Handled Queries</h5>

      @if (handledQueries.length === 0) {
        <p class="text-muted">No queries handled.</p>
      } @else {
        <ul class="list-group">
          @for (query of handledQueries; track query.queryId) {
            <li class="list-group-item">
              <div class="d-flex justify-content-between align-items-start flex-column flex-md-row">
                <div>
                  <strong>{{ query.customer?.firstName }} {{ query.customer?.lastName }}:</strong>
                  {{ query.queryDescription }}<br>
                  <small class="text-muted">Response: {{ query.officerResponse || '‚Äî' }}</small>
                </div>
                <span class="badge bg-{{ getQueryBadge(query.queryStatus) }}">
                  {{ query.queryStatus }}
                </span>
              </div>
            </li>
          }
        </ul>
      }
    </section>
  }
</div>